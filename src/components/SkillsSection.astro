---
import type { SkillGroup } from '../types';
import { useTranslations } from '../i18n/ui';

interface Props {
  lang?: string;
}

const { lang = 'es' } = Astro.props;
const t = useTranslations(lang as 'en' | 'es');

const base = import.meta.env.BASE_URL;

const skills: SkillGroup[] = [
  {
    category: 'Frontend',
    type: 'logos',    
    items: [
      { name: 'React', icon: 'react', color: '#61DAFB' },
      { name: 'Next.js', icon: 'nextdotjs', color: '#000000' },
      { name: 'React Native + Expo', icon: 'expo', color: '#61DAFB', badge: 'expo' },
      { name: 'Angular', icon: 'angular', color: '#DD0031' },
      { name: 'Astro', icon: 'astro', color: '#FF5D01' },
      { name: 'Tailwind CSS', icon: 'tailwindcss', color: '#06B6D4' },
    ]
  },
  {
    category: 'Backend',
    type: 'logos',
    items: [
      { name: 'Node.js', icon: 'nodedotjs', color: '#339933' },
      { name: 'MongoDB', icon: 'mongodb', color: '#47A248' },
      { name: 'TypeScript', icon: 'typescript', color: '#3178C6' },
      { name: 'C#', icon: null, color: '#239120', isLocal: true, localSrc: `${base}/c-sharp.webp` },
      { name: '.NET', icon: 'dotnet', color: '#512BD4' },
      { name: 'MySQL', icon: 'mysql', color: '#4479A1' },
    ]
  },
  {
    category: 'Other',
    type: 'logos',
    items: [
      { name: 'CursorIA', icon: null, color: '#6366F1', isLocal: true, localSrc: `${base}/icon_cursor_ia.webp` },
      { name: 'Git', icon: 'git', color: '#F05032' },
      { name: 'GitHub', icon: 'github', color: '#181717' },
      { name: 'Jira', icon: 'jira', color: '#0052CC' },
      { name: 'Figma', icon: 'figma', color: '#F24E1E' },
    ]
  },
];

// etiquetas de categorÃ­as (solo visual)
const categoryLabel = (cat: string) => {
  if (lang === 'es') {
    if (cat === 'Frontend') return 'Frontend';
    if (cat === 'Backend') return 'Backend';
    if (cat === 'Other') return 'Otras';
  }
  return cat;
};
---

<section id="skills" class="py-20 bg-white dark:bg-gray-900">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16 animate-on-scroll">
      <h2 class="text-3xl md:text-4xl font-bold text-primary-900 dark:text-white">{t('skills.title')}</h2>
      <div class="mt-2 w-24 h-1 bg-accent-500 mx-auto rounded-full"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        {t('skills.description')}
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {skills.map((skillGroup) => (
        <div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-6 shadow-md animate-on-scroll">
          <h3 class="text-xl font-semibold text-primary-900 dark:text-white mb-4">
            {categoryLabel(skillGroup.category)}
          </h3>
          <div class="space-y-4">
            {skillGroup.type === 'logos' ? (
              <div class="grid grid-cols-3 gap-4">
                {skillGroup.items.map((skill: any) => (
                  <div class="flex flex-col items-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <div class="relative w-12 h-12 mb-2 flex items-center justify-center">
                      {skill.isLocal ? (
                        <img
                          src={skill.localSrc}
                          alt={skill.name}
                          class="w-12 h-12"
                        />
                      ) : skill.icon ? (
                        <img
                          src={`https://cdn.simpleicons.org/${skill.icon}`}
                          alt={skill.name}
                          class="w-12 h-12"
                        />
                      ) : (
                        <div class="w-12 h-12 rounded-full flex items-center justify-center text-white text-[10px] font-semibold"
                             style={`background:${skill.color || '#64748B'}`}>
                          {skill.initials || 'POO'}
                        </div>
                      )}
                      {skill.badge && (
                        <img
                          src={`https://cdn.simpleicons.org/${skill.badge}`}
                          alt="badge"
                          class="absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-white dark:bg-gray-800 p-0.5 shadow"
                        />
                      )}
                    </div>
                    <span class="text-xs text-gray-600 dark:text-gray-400 text-center">{skill.name}</span>
                  </div>
                ))}
              </div>
            ) : null}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>